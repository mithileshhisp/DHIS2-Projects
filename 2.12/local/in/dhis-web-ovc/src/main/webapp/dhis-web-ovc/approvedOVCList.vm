
<table>
	<tr>
		<td class='text-column' >$i18n.getString( "search_result_matching_the_search_criteria" ):</td>
		<td>&nbsp;</td>
		<td>&nbsp;</td>
		<td>
		#if($!listAll)
			$i18n.getString( "list_all" )
		#else
			$i18n.getString( "search_ovc" )
		#end
		</td>
	</tr>
	<tr>
		<td class='text-column' >$i18n.getString( "total_result" )</td>
		<td>&nbsp;</td>
		<td>&nbsp;</td>
		<td>$!total</td>
	</tr>
</table>
#if( $status == "NONE" )
#if( $patients.size() > 0 )	
<table class="mainPageTable">
    <tr>
        <td>
            <table class="listTable" id="listTable"> 
                <colgroup>
                    <col width="30"/>
                    <col />
                    <col />
                    <col />
                    <col/>
                    <col/>
                    <col/>
                    <col/>
                    <col/>
                    <col width="167" />
                    #if($mapPatientOrgunit.size()!=0)
          				<col/>
          			#end
                </colgroup>   
                <thead>
                    <tr>
                        <th>#</th>
                        <th>$i18n.getString( "ovc_name" )</th>
                        <th>$i18n.getString( "gender" )</th>
                        <th>$i18n.getString( "date_of_birth" )</th>
                        <th>$i18n.getString( "age" )</th> 
                        <th>$i18n.getString( "ovc_identifier" )</th>
                        <th>$i18n.getString( "registration_date" )</th>
                        <th>$i18n.getString( "approved_date" )</th>
						
                        <th>$i18n.getString( "last_visit_date" )</th>
						
                        #if($mapPatientOrgunit.size()!=0)
							<th>$i18n.getString( "hierachy_orgunit" )</th>
						#end
                        <th style="text-align:center" class="{sorter: false}">$i18n.getString( "operations" )</th>
                    </tr>
                </thead>
                <tbody id="list">   
                    #foreach( $patient in $patients )
                        <tr>
                            <td>#set( $nr = ( ( $paging.getCurrentPage() - 1  ) * $paging.pageSize ) + $velocityCount )
                                $nr
                            </td>
                            
                            #set($value="")
                            #set($value=$patient.getFullName())
                        	#set( $key = $patient.id + ":" + 405 )
                            <!--<td>#set( $nr = ( ( $paging.getCurrentPage() - 1  ) * $paging.pageSize ) + $velocityCount )$nr</td>-->
                            <td>$encoder.htmlEncode($value)</td>
                            <td>$i18n.getString( $patient.gender )</td>
                            <td>$format.formatDate( $patient.birthDate )</td>
                            <td>$encoder.htmlEncode( $patient.getAge() )</td>
							<td>$!mapPatientSystemIdentifier.get($patient.id)</td>
							<!--
							#if($mapPatientSystemIdentifier.size()!=0 )
								<td>$!mapPatientSystemIdentifier.get($patient.id)</td>
							#end
							<td>$!patient.phoneNumber</td>
							-->
                            <!--<td>$!patient.registrationDate</td>-->
                            <td>$format.formatDate( $!patient.registrationDate )</td>
                            <td>$!patientAttributeValueMap.get( $key )</td>
							
                            <td>$!patientLastVisitDateMap.get( $patient.id )</td>
							
                            #if($mapPatientOrgunit.size()!=0)
								<td>$!mapPatientOrgunit.get($patient.id)</td>
							#end
                            <td>
                                #if( $auth.hasAccess( "dhis-web-ovc", "updateovcstatus") )
                                    <a href="javascript:showUpdateOVCRegistrationFormInApprove( '$patient.id' )" title='$i18n.getString( "edit_profile_status" )'><img src="images/profile.png" alt='$i18n.getString( "edit_profile_status" )'></a>
                                #else
                                    <a href="javascript:showUpdateOVCRegistrationFormInApprove( '$patient.id' )" title='$i18n.getString( "edit_profile" )'><img src="../images/edit.png" alt='$i18n.getString( "edit_profile" )'></a>
                                #end                                
                                
                                <a href="javascript:showOVCForm1A( '$patient.id' )" title='$i18n.getString( "form_1A" )'><img src="images/form1A.png" alt='$i18n.getString( "ovc_form_1" )'></a>
								
								<a href="javascript:showOVCCareGiverForm( '$patient.id' )" title='$i18n.getString( "care_giver_form" )'><img src="images/cg.png" alt='$i18n.getString( "care_giver_form" )'></a>	
                                <a href="javascript:showOVCExitForm( '$patient.id' )" title='$i18n.getString( "exit" )'><img src="images/exit.png" alt='$i18n.getString( "ovc_exit" )'></a>
                                <a href="javascript:showOVCHouseHoldAssessmentForm( '$patient.id' )" title='$i18n.getString( "household_assessment_form" )'><img src="images/household.png" alt='$i18n.getString( "household_assessment_form" )'></a>
                                <a href="javascript:showOVCRegistrationDetailsInActive( '$patient.id' )" title='$i18n.getString( "ovc_information" )'><img src="../images/information.png" alt='$i18n.getString( "ovc_information" )'></a>
                            </td>                               
                        </tr>
                    #end
                </tbody>
            </table>
        </td>
    </tr>
    <tr>
        <td>
            <p></p>
            <div class="paging-container">
                #parse( "/dhis-web-commons/paging/paging.vm" )
            </div>
        </td>
    </tr>
</table>
</div>

<!--<div id='updateOVCRegistrationFormInApproveDiv'></div>--> <!-- Update OVC Registration Form -->
<!--<div id='ovcExitFormDiv'></div>--> <!-- OVC Exit Form -->
<!--<div id='ovcForm1ADiv'></div>--> <!-- OVC Form (1 A) -->
<!--<div id='ovcHouseHoldAssessmentFormDiv'></div>--> <!-- OVC HouseHold Assessment Form div --> 

 
 
<!--<div id="detailsInfo"></div>-->
 <span id="message"></span>


<script type="text/javascript">
    jQuery(document).ready(function(){
        setTableStyles();
        //tableSorter( 'listTable' ); 
    });
    
    jQuery(document).ready(function(){  
        tableSorter( 'listTable' ); 
    });
    
    
    var i18n_ovcRegistration_details_and_history = '$encoder.jsEscape( $i18n.getString( "ovc_Registration_details_and_history" ) , "'" )';
    var i18n_ovcRegistration_details = '$encoder.jsEscape( $i18n.getString( "ovc_Registration_details" ) , "'" )';
    var i18n_list_all_patients = '$encoder.jsEscape( $i18n.getString( "list_all_patients" ) , "'" )';
    var i18n_search_patients = '$encoder.jsEscape( $i18n.getString( "search_patients" ) , "'" )';
</script>
#end
     
#else
    <h4>$status</h4>
#end