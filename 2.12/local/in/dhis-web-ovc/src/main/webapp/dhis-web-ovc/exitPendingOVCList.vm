
<table>
	<tr>
		<td class='text-column' >$i18n.getString( "search_result_matching_the_search_criteria" ):</td>
		<td>&nbsp;</td>
		<td>&nbsp;</td>
		<td>
		#if($!listAll)
			$i18n.getString( "list_all" )
		#else
			$i18n.getString( "search_ovc" )
		#end
		</td>
	</tr>
	<tr>
		<td class='text-column' >$i18n.getString( "total_result" )</td>
		<td>&nbsp;</td>
		<td>&nbsp;</td>
		<td>$!total</td>
	</tr>
</table>

#if( $status == "NONE" )
#if( $patients.size() > 0 )	
<table class="mainPageTable">
	<tr>
		<td>
			<table class="listTable" id="listTable"> 
				<colgroup>
					<col width="30"/>
					<col />
					<col />
					<col />
					<col/>
					<!--<col/>-->
					<col/>
					<col/>
					<col/>
					#if($mapPatientOrgunit.size()!=0)
          				<col/>
          			#end
					<col/>
				</colgroup>   
				<thead>
					<tr>
						<th>#</th>
						<th>$i18n.getString( "ovc_name" )</th>
						<th>$i18n.getString( "gender" )</th>
						<th>$i18n.getString( "date_of_birth" )</th>
						<th>$i18n.getString( "age" )</th> 
						<!--<th class="{sorter: false}">$i18n.getString( "contact_number" )</th>-->
						<th>$i18n.getString( "date_of_exit" )</th>
						<th>$i18n.getString( "reason_for_exit" )</th>
						#if($mapPatientOrgunit.size()!=0)
							<th>$i18n.getString( "hierachy_orgunit" )</th>
						#end
						<th class="{sorter: false}">$i18n.getString( "operations" )</th>
					</tr>
				</thead>
				<tbody id="list">   
					#foreach( $patient in $patients )
						<tr>
							<td>#set( $nr = ( ( $paging.getCurrentPage() - 1  ) * $paging.pageSize ) + $velocityCount )
								$nr
							</td>
							
							#set($value="")
							#set($value=$patient.getFullName())
							#set( $key1 = $patient.id + ":" + 604 )
							#set( $key2 = $patient.id + ":" + 450 )
							<!--<td>#set( $nr = ( ( $paging.getCurrentPage() - 1  ) * $paging.pageSize ) + $velocityCount )$nr</td>-->
							<td>$encoder.htmlEncode($value)</td>
							<td>$i18n.getString( $patient.gender )</td>
							<td>$format.formatDate( $patient.birthDate )</td>
							<td>$encoder.htmlEncode( $patient.getAge() )</td>
							<td>$!patientAttributeValueMap.get( $key1 )</td>
							<td>$!patientAttributeValueMap.get( $key2 )</td>
							#if($mapPatientOrgunit.size()!=0)
								<td>$!mapPatientOrgunit.get($patient.id)</td>
							#end
							<td>
								#if( $auth.hasAccess( "dhis-web-ovc", "updateovcstatus") )
									<a href="javascript:showUpdateOVCExitForm( '$patient.id' )" title='$i18n.getString( "edit_profile_status" )'><img src="images/profile.png" alt='$i18n.getString( "edit_profile_status" )'></a>
								#else
									<a href="javascript:showUpdateOVCExitForm( '$patient.id' )" title='$i18n.getString( "edit_profile" )'><img src="../images/edit.png" alt='$i18n.getString( "edit_profile" )'></a>
								#end
								
								<!--<a href="javascript:removePatient( '$patient.id', '$encoder.jsEncode( $patient.getFullName() )' )" title='$i18n.getString( "remove" )'><img src="../images/delete.png" alt='$i18n.getString( "remove" )'></a>-->
								<a href="javascript:showOVCExitPendingDetails( '$patient.id' )" title='$i18n.getString( "ovc_exit_details" )'><img src="../images/information.png" alt='$i18n.getString( "ovc_exit_details" )'></a>
							</td>                               
						</tr>
					#end
				</tbody>
			</table>
		</td>
	</tr>
	<tr>
		<td>
            <p></p>
            <div class="paging-container">
                #parse( "/dhis-web-commons/paging/paging.vm" )
            </div>
        </td>
    </tr>
</table>
</div>

<!--<div id='updateOVCExitFormDiv'></div>--> <!-- Update OVC Exit Form -->
 
 
 <div id="detailsInfo"></div>
 <span id="message"></span>


<script type="text/javascript">
    jQuery(document).ready(function(){
        setTableStyles();
        //tableSorter( 'listTable' ); 
    });
    
    jQuery(document).ready(function(){	
		tableSorter( 'listTable' );	
	});
    
    
    var i18n_ovcRegistration_details_and_history = '$encoder.jsEscape( $i18n.getString( "ovc_Registration_details_and_history" ) , "'" )';
    var i18n_ovcRegistration_details = '$encoder.jsEscape( $i18n.getString( "ovc_Registration_details" ) , "'" )';
    var i18n_ovc_exit_pending_details = '$encoder.jsEscape( $i18n.getString( "ovc_exit_details" ) , "'" )';
    var i18n_list_all_patients = '$encoder.jsEscape( $i18n.getString( "list_all_patients" ) , "'" )';
    var i18n_search_patients = '$encoder.jsEscape( $i18n.getString( "search_patients" ) , "'" )';
</script>
#end
		
#else
	<h4>$status</h4>
#end