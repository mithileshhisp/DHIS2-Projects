
<script type="text/javascript">

		jQuery("#availableIndicatorsList").dhisAjaxSelect({
			source: "../dhis-web-commons-ajax-json/getIndicators.action",
			iterator: "indicators",
			connectedTo: 'indicatorsSelectedList',
			handler: function(item) {
				var option = jQuery("<option data-id='" + item.groups + "' />");
				option.text( item.name );
				option.attr( "value", item.id );

				return option;
					},
			filter: {
				source: "../dhis-web-commons-ajax-json/getIndicatorGroups.action",
				iterator: "indicatorGroups",
				label: 'indicator group',
				handler: function(item) {
							return "<option data-key='id' data-value='" + item.id + "'>" + item.name + "</option>";
							}
					}
		});
	

	var previousName = '';
	
function updateDQAIndicators(){

 var selectedValues = [];    
    $("#indicatorsSelectedList option").each(function(){
        selectedValues.push($(this).val()); 
    });
    
	$("#$parameterName").val(selectedValues);
$( '#indicatorDiv' ).dialog('close');
}

</script>
<form id="manageDQAIndicatorForm" name="manageDQAIndicatorForm" action="updateDQAIndicator.action" method="post" class="inputForm">
 <table id="indicatorSelectionArea">
      <colgroup>
        <col style="width: 500px;"/>
        <col/>
        <col style="width: 500px;"/>
      </colgroup>
      <thead>
      <tr>
        <th>$i18n.getString( "available_indicators" )</th>
		<th>$i18n.getString( "filter" )</th>
        <th>$i18n.getString( "selected_indicators" )</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          <select id="availableIndicatorsList" multiple="multiple" style="height: 200px; width: 100%;">
          	  #foreach ( $availableIndicator in $indicators )
                  <option value="$availableIndicator.id">$encoder.htmlEncode( $availableIndicator.displayName )</option>
              #end
              </select>
        </td>
        <td>
        	<input type="button" value="&gt;" title="$i18n.getString( 'move_selected' )" style="width:50px" onclick="dhisAjaxSelect_moveAllSelected( 'availableIndicatorsList' );"/><br/>
            <input type="button" value="&lt;" title="$i18n.getString( 'remove_selected' )" style="width:50px" onclick="dhisAjaxSelect_moveAllSelected( 'indicatorsSelectedList' );"/><br/>
			<input type="button" value="&gt;&gt;" title="$i18n.getString('move_all')" style="width:50px" onclick="dhisAjaxSelect_moveAll( 'availableIndicatorsList' );"/><br/>
			<input type="button" value="&lt;&lt;" title="$i18n.getString('remove_all')" style="width:50px" onclick="dhisAjaxSelect_moveAll( 'indicatorsSelectedList' );"/>
        </td>
        <td>
          <select id="indicatorsSelectedList" name="indicatorsSelectedList" multiple="multiple" style="height: 200px; width: 100%; margin-top: 45px;">
             #foreach ( $availableIndicator in $chosenIndicators )
                  <option value="$availableIndicator.id">$encoder.htmlEncode( $availableIndicator.displayName )</option>
              #end
          </select>
        </td>
      </tr>

      <tr>
        <td colspan="3">
          <input type="button" value="$i18n.getString( 'save' )" style="width:120px" onclick="updateDQAIndicators()" />
          <input type="button" onclick="window.location.href='viewWHOSettingsForm.action'" value="$i18n.getString( 'cancel' )" style="width:120px" />
        </td>
      </tr>
      
    </tbody>
  </table>


