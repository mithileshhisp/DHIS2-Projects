<html>
<head>
    <meta charset="utf-8" />
    <script>
        var startDate = $startDate;
        var endDate = $endDate;
        $(function() {
            $( "#StartDatePicker" ).datepicker({
                changeMonth: true,
                changeYear: true,
                dateFormat: "yy-mm-dd",
                minDate:startDate,
                maxDate:endDate,
                defaultDate:startDate
            });
        });
        $(function() {
            $( "#EndDatePicker" ).datepicker({
                changeMonth: true,
                changeYear: true,
                dateFormat: "yy-mm-dd",
                minDate:startDate,
                maxDate:endDate,
                defaultDate:endDate
            });
        });

        $(function callUpdateAction() {
            $.ajax({
                type: "POST",
                url: 'getStartEndDate.action'
            });
        });


    </script>

    <script src="chosen/chosen.jquery.js" type="text/javascript"></script>

    <link rel="stylesheet" href="chosen/chosen.css">
    <style type="text/css" media="all">
        /* fix rtl for demo */
        .chzn-rtl .chzn-drop {
            left: -9000px;
        }
    </style>


    <script type="text/javascript">
        $(document).ready(function() {

            $('.masterTooltip').hover(function(){
                // Hover over code
                var title = $(this).attr('title');
                $(this).data('tipText', title).removeAttr('title');
                $('<p class="tooltip"></p>')
                        .text(title)
                        .appendTo('body')
                        .fadeIn('slow');
            }, function() {
                // Hover out code
                $(this).attr('title', $(this).data('tipText'));
                $('.tooltip').remove();
            }).mousemove(function(e) {
                        var mousex = e.pageX + 20; //Get X coordinates
                        var mousey = e.pageY + 10; //Get Y coordinates
                        $('.tooltip')
                                .css({ top: mousey, left: mousex })
                    });
        });
    </script>


    <style>
        .tooltip {
            display:none;
            position:absolute;
            border:1px solid;
            background-color: #d3d3d3;
            border-radius:5px;
            padding:10px;
            color:#000000;
            font-size:12px;
            font: Arial;
        }

    </style>
</head>

<body>

<h3 id="moduleHeader">$i18n.getString("search_data_single")</h3>

    <div id="selectionBox" class="inputCriteria" style="width:500px;height:130px;">
        <table>
        <form id="searchFunctionOutForm" method="post" action="getStartEndDate.action">
            <tr>
                <td><label for="dataElementIDSelect">Dataelement</label></td>
                <td>
                 <select class="chzn-select" name="dataElementID" id="dataElementID" style="width:350px;" tabindex="2" onchange="this.form.submit()">
                     #foreach( $dataelement in $allDataElements )
                        #if($dataelement.getDomainType()!='patient')
                        <option value=$dataelement.getId()
                            #if($dataelement.getId() == $dataElementID)
                                    selected="selected"
                            #end
                        >$dataelement.getName()</option>
                        #end
                     #end
                 </select>
                </td>
                <td>
                    <span id="loaderSpan" style="display:none"><img src='../images/ajax-loader-bar.gif'></span>
                </td>
            </tr>
        </form>
        <form id="searchFunctionForm" method="post" action="getResultTable.action">
            <tr>
                <td><label for="StartDatePicker">From</label></td>
                <td>
                    <input type="text" id="StartDatePicker" class="masterTooltip" title="Earliest data entry date pre-selected. Click to change." name="StartDatePicker" value=$startDate/>
                </td>
            </tr>
            <tr>
                <td><label for="EndDatePicker">To</label></td>
                <td>
                    <input type="text" id="EndDatePicker" class="masterTooltip" title="Latest data entry date pre-selected. Click to change." name="EndDatePicker" value=$endDate/>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="hidden" id="periodType" name="periodType" value=$periodType>
                    <input type="hidden" id="dataElementID" name="dataElementID" value=$dataElementID></td>
                <td><input name="Get Data" type="submit" value="Get Data"></label></td>
            </tr>
        </form>
        </table>
    </div>

    <script>
       $(".chzn-select").chosen();
    </script>

</body>
</html>